{% extends 'common/_dashboard.html' %}
{% load static %}

{% block title %} Dashboard | {% endblock %}

{% block dashboard_content %}
    <!-- Dashboard Content data-simplebar -->
    <div class="dashboard-content-container">
        <div class="dashboard-content-inner">

            <!-- Dashboard Headline -->
            <div class="dashboard-headline">
                <h3>{{ request.user.first_name }}, {{ request.user.last_name }}!</h3>
                <span>We are glad to see you again!</span>

                <!-- Breadcrumbs -->
                <nav id="breadcrumbs" class="dark">
                    <ul>
                        <li><a href="{% url 'index' %}">Home</a></li>
                        <li>Dashboard</li>
                    </ul>
                </nav>
            </div>

            <!-- Fun Facts Container -->
            <div class="fun-facts-container">
                <div class="fun-fact" data-fun-fact-color="#36bd78">
                    <div class="fun-fact-text">
                        <span>Task Posted</span>
                        <h4>{{ request.user.tasks.count }}</h4>
                    </div>
                    <div class="fun-fact-icon"><i class="icon-material-outline-business-center"></i></div>
                </div>
                <div class="fun-fact" data-fun-fact-color="#b81b7f">
                    <div class="fun-fact-text">
                        <span>Task Completed</span>
                        <h4>{{ request.user.task_completed }}</h4>
                    </div>
                    <div class="fun-fact-icon"><i class="icon-material-outline-check-circle"></i></div>
                </div>
                <div class="fun-fact" data-fun-fact-color="#efa80f">
                    <div class="fun-fact-text">
                        <span>In Progress</span>
                        <h4>{{ request.user.task_InProgress }}</h4>
                    </div>
                    <div class="fun-fact-icon"><i class="icon-line-awesome-hourglass-2"></i></div>
                </div>
                <div class="fun-fact" style="display: none"></div>
            </div>

            <!-- Row -->
            <div class="row">
                <div class="col-xl-12">
                    <!-- Dashboard Box -->
                    <div class="dashboard-box main-box-in-row">
                        <div class="headline">
                            <h3><i class="icon-feather-bar-chart-2"></i> Tasks Status </h3>
                        </div>
                        <div class="content">
                            <!-- Chart -->
                            <div class="chart">
                                <canvas id="barChart" width="100" height="45"></canvas>
                                {#								<canvas id="chart" width="100" height="45"></canvas>#}
                            </div>
                        </div>
                    </div>
                    <!-- Dashboard Box / End -->
                </div>
            </div>
            <!-- Row / End -->

            <!-- Row -->
            <div class="row">
                <!-- Dashboard Notifications Box col-xl-8 -->
                <div class="col-xl-12">
                    <div class="dashboard-box">
                        <div class="headline">
                            <h3><i class="icon-material-baseline-notifications-none"></i> Notifications</h3>
                            <button class="mark-as-read ripple-effect-dark" data-tippy-placement="left"
                                    title="Mark all as read">
                                <i class="icon-feather-check-square"></i>
                            </button>
                        </div>
                        <div class="content">
                            <ul class="dashboard-box-list">
                                <li>
                                    <span class="notification-icon"><i
                                            class="icon-material-outline-group"></i></span>
                                    <span class="notification-text">
                                    <strong>Michael Shannah</strong> applied for a job <a href="#">Full Stack Software Engineer</a>
                                </span>
                                    <!-- Buttons -->
                                    <div class="buttons-to-right">
                                        <a href="#" class="button ripple-effect ico" title="Mark as read"
                                           data-tippy-placement="left"><i class="icon-feather-check-square"></i></a>
                                    </div>
                                </li>
                                <li>
                                    <span class="notification-icon"><i
                                            class=" icon-material-outline-gavel"></i></span>
                                    <span class="notification-text">
                                    <strong>Gilber Allanis</strong> placed a bid on your <a
                                            href="#">iOS App Development</a> project
                                </span>
                                    <!-- Buttons -->
                                    <div class="buttons-to-right">
                                        <a href="#" class="button ripple-effect ico" title="Mark as read"
                                           data-tippy-placement="left"><i class="icon-feather-check-square"></i></a>
                                    </div>
                                </li>
                                <li>
                                    <span class="notification-icon"><i
                                            class="icon-material-outline-autorenew"></i></span>
                                    <span class="notification-text">
                                    Your job listing <a href="#">Full Stack Software Engineer</a> is expiring
                                </span>
                                    <!-- Buttons -->
                                    <div class="buttons-to-right">
                                        <a href="#" class="button ripple-effect ico" title="Mark as read"
                                           data-tippy-placement="left"><i class="icon-feather-check-square"></i></a>
                                    </div>
                                </li>
                                <li>
                                    <span class="notification-icon"><i
                                            class="icon-material-outline-group"></i></span>
                                    <span class="notification-text">
                                    <strong>Sindy Forrest</strong> applied for a job <a href="#">Full Stack Software Engineer</a>
                                </span>
                                    <!-- Buttons -->
                                    <div class="buttons-to-right">
                                        <a href="#" class="button ripple-effect ico" title="Mark as read"
                                           data-tippy-placement="left"><i class="icon-feather-check-square"></i></a>
                                    </div>
                                </li>
                                <li>
                                    <span class="notification-icon"><i
                                            class="icon-material-outline-rate-review"></i></span>
                                    <span class="notification-text">
                                    <strong>David Peterson</strong> left you a <span class="star-rating no-stars"
                                                                                     data-rating="5.0"></span> rating after finishing <a
                                            href="#">Logo Design</a> task
                                </span>
                                    <!-- Buttons -->
                                    <div class="buttons-to-right">
                                        <a href="#" class="button ripple-effect ico" title="Mark as read"
                                           data-tippy-placement="left"><i class="icon-feather-check-square"></i></a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

            </div>
            <!-- Row / End -->

            <!-- Footer -->
            <div class="dashboard-footer-spacer"></div>
            <div class="small-footer">
                <div class="small-footer-copyrights">
                    Â© 2018 <strong>Hireo</strong>. All Rights Reserved.
                </div>
                <ul class="footer-social-links">
                    <li>
                        <a href="#" title="Facebook" data-tippy-placement="top">
                            <i class="icon-brand-facebook-f"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#" title="Twitter" data-tippy-placement="top">
                            <i class="icon-brand-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#" title="Google Plus" data-tippy-placement="top">
                            <i class="icon-brand-google-plus-g"></i>
                        </a>
                    </li>
                    <li>
                        <a href="#" title="LinkedIn" data-tippy-placement="top">
                            <i class="icon-brand-linkedin-in"></i>
                        </a>
                    </li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <!-- Footer / End -->
        </div>
    </div>
    <!-- Dashboard Content / End -->

    <script src="{% static 'js/chart.min.js' %}"></script>
    <script type="text/javascript">
        const ctxB = document.getElementById("barChart").getContext('2d');
        const myBarChart = new Chart(ctxB, {
            type: 'bar',
            data: {
                labels: ["Tasks Posted", "Completed", "In Progress","Pending", "Proposal Submit", "Expired"],
                datasets: [{
                    data: {{data|safe}},
                    backgroundColor: [
                        'rgba(64, 182, 96, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(184, 27, 127, 0.2)',
                        'rgba(255, 99, 132, 0.2)',
                    ],
                    borderColor: [
                        'rgba(64, 182, 96, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(184, 27, 127, 1)',
                        'rgba(255,99,132,1)',
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                legend:{
                  display: false,
                },
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });

    </script>
{% endblock dashboard_content %}